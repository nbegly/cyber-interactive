<!DOCTYPE html>
<html lang="en">
<head>
    <script src="auth.js"></script> <meta charset="UTF-8">
    <title>Link Access</title>
    <style>body { font-family: sans-serif; background-color: #2c3e50; color: #ecf0f1; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; text-align: center; } .container { background-color: #34495e; padding: 40px; border-radius: 10px; width: 300px; } #prompt-text { min-height: 1.2em; } input { width: 90%; padding: 10px; margin: 10px 0; border-radius: 5px; border: none; } button { width: 100%; padding: 12px; background-color: #2980b9; color: white; border: none; border-radius: 5px; cursor: pointer; } .message { color: #e74c3c; margin-top: 15px; visibility: hidden; }</style>
</head>
<body>
    <div class="container">
        <h1>Access Required</h1>
        <p id="prompt-text">Please enter the password to continue.</p>
        <input type="password" id="passwordInput" placeholder="Password">
        <button id="submitButton">Enter</button>
        <p id="message" class="message">Incorrect password.</p>
    </div>
<script>
    // DEFINE YOUR INDIVIDUAL HASHED PASSWORDS HERE
    const passwordMap = {
        "/cyber-main/simulations/linux-plus/index.html": "cdd72ee01c481382f61b8351754dbd6eb4a830abcdbe6c30ada7e68b9817ba4e",
        "/cyber-main/simulations/security-plus/index.html": "e6b08191587c6e05a0296485bfae73d1b352154f4084ab6259c95cf18450b7e4",
        "/cyber-main/simulations/security-x/index.html": "ef9382c813ad76d705a89492b54e7c274900e6b14210cac6b4d2d85582abe580",
        "/cyber-main/simulations/net-plus/index.html": "674b75ed1e20adc28a6cbeb6aed080913b246a6072420eea98f480a97f528213",
        "/cyber-main/practice-exams/linux-plus/index.html": "edbb234f9bbdf435c8b7e8d4a88de3c1a3beb3b7e25638c7c761acb8bdc472ac",
        "/cyber-main/practice-exams/security-plus/index.html": "2199b02b1e826f3047255c6cebae46c817e25d28c63785b877c2e4cc5a5adf4b",
        "/cyber-main/practice-exams/security-x/index.html": "7d1808d935ccf5d7ded60192eb9c9676cd075a1bf8d9ebd88beb3e5a6451df6f",
        "/cyber-main/practice-exams/net-plus/index.html": "78e1edbefd4e97c53ce004700a3b1b3b27292c7c800ba2ab883b9f16ef00f3d2",
        "/cyber-main/practice-exams/cysa-plus/index.html": "4c2cd61e446b0549af3f55cf11402e53c22e26bca8c3cfcfc8262cc11b1aab8c",
        "/cyber-main/practice-exams/splunkccu/index.html": "e2385f0b1679958d6b8812ad1d4a27e306985e56318e4f7cdce87a8fb8e70ce2"
    };

    let targetPage = '';
    window.onload = () => {
        const params = new URLSearchParams(window.location.search);
        targetPage = params.get('redirect');
        if (targetPage) {
            document.getElementById('prompt-text').textContent = `Enter password for ${targetPage}:`;
        } else {
             document.getElementById('prompt-text').textContent = `Error: No target specified.`;
        }
    };

    async function checkPassword() {
        const correctPasswordHash = passwordMap[targetPage];
        const enteredPassword = document.getElementById('passwordInput').value;
        const messageElement = document.getElementById('message');
        if (!correctPasswordHash) { messageElement.textContent = "Error: No password configured."; messageElement.style.visibility = 'visible'; return; }
        const enteredPasswordHash = await sha256(enteredPassword);
        if (enteredPasswordHash === correctPasswordHash) {
            const unlockedSims = JSON.parse(sessionStorage.getItem('unlockedSims')) || [];
            if (!unlockedSims.includes(targetPage)) { unlockedSims.push(targetPage); }
            sessionStorage.setItem('unlockedSims', JSON.stringify(unlockedSims));
            window.location.href = targetPage; 
        } else {
            messageElement.textContent = 'Incorrect password.';
            messageElement.style.visibility = 'visible';
            document.getElementById('passwordInput').value = '';
        }
    }
    async function sha256(message) {
        const msgBuffer = new TextEncoder().encode(message);
        const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
        const hashArray = Array.from(new Uint8Array(hashBuffer));
        const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        return hashHex;
    }
    document.getElementById('submitButton').addEventListener('click', checkPassword);
    document.getElementById('passwordInput').addEventListener('keypress', (e) => { if (e.key === 'Enter') checkPassword(); });
</script>
</body>
</html>